{"openapi":"3.1.0","info":{"title":"WrzDJ API","description":"Song request system for DJs","version":"0.1.0"},"paths":{"/api/auth/login":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_api_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/me":{"get":{"tags":["auth"],"summary":"Get Me","operationId":"get_me_api_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/events":{"get":{"tags":["events"],"summary":"List Events","operationId":"list_events_api_events_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/EventOut"},"type":"array","title":"Response List Events Api Events Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["events"],"summary":"Create New Event","operationId":"create_new_event_api_events_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/events/{code}":{"get":{"tags":["events"],"summary":"Get Event","operationId":"get_event_api_events__code__get","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["events"],"summary":"Update Event Endpoint","operationId":"update_event_endpoint_api_events__code__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["events"],"summary":"Delete Event Endpoint","description":"Delete an event and all its requests.","operationId":"delete_event_endpoint_api_events__code__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/events/{code}/requests":{"post":{"tags":["events"],"summary":"Submit Request","operationId":"submit_request_api_events__code__requests_post","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["events"],"summary":"Get Event Requests","operationId":"get_event_requests_api_events__code__requests_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RequestStatus"},{"type":"null"}],"title":"Status"}},{"name":"since","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Since"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RequestOut"},"title":"Response Get Event Requests Api Events  Code  Requests Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/requests/{request_id}":{"patch":{"tags":["requests"],"summary":"Update Request","operationId":"update_request_api_requests__request_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"integer","title":"Request Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/search":{"get":{"tags":["search"],"summary":"Search","operationId":"search_api_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":2,"maxLength":200,"title":"Q"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SearchResult"},"title":"Response Search Api Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/search/cache":{"delete":{"tags":["search"],"summary":"Clear Search Cache","description":"Clear all cached search results (admin only).","operationId":"clear_search_cache_api_search_cache_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Clear Search Cache Api Search Cache Delete"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/public/events/{code}/display":{"get":{"tags":["public"],"summary":"Get Kiosk Display","description":"Get public kiosk display data for an event.","operationId":"get_kiosk_display_api_public_events__code__display_get","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KioskDisplayResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_login_api_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_api_auth_login_post"},"EventCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"expires_hours":{"type":"integer","maximum":48.0,"minimum":1.0,"title":"Expires Hours","default":6}},"type":"object","required":["name"],"title":"EventCreate"},"EventOut":{"properties":{"id":{"type":"integer","title":"Id"},"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"},"is_active":{"type":"boolean","title":"Is Active"},"join_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Join Url"}},"type":"object","required":["id","code","name","created_at","expires_at","is_active"],"title":"EventOut"},"EventUpdate":{"properties":{"expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expires At"},"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"}},"type":"object","title":"EventUpdate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"KioskDisplayResponse":{"properties":{"event":{"$ref":"#/components/schemas/PublicEventInfo"},"qr_join_url":{"type":"string","title":"Qr Join Url"},"accepted_queue":{"items":{"$ref":"#/components/schemas/PublicRequestInfo"},"type":"array","title":"Accepted Queue"},"now_playing":{"anyOf":[{"$ref":"#/components/schemas/PublicRequestInfo"},{"type":"null"}]},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["event","qr_join_url","accepted_queue","now_playing","updated_at"],"title":"KioskDisplayResponse"},"PublicEventInfo":{"properties":{"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"}},"type":"object","required":["code","name"],"title":"PublicEventInfo"},"PublicRequestInfo":{"properties":{"id":{"type":"integer","title":"Id"},"title":{"type":"string","title":"Title"},"artist":{"type":"string","title":"Artist"},"artwork_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Artwork Url"}},"type":"object","required":["id","title","artist","artwork_url"],"title":"PublicRequestInfo"},"RequestCreate":{"properties":{"artist":{"type":"string","maxLength":255,"minLength":1,"title":"Artist"},"title":{"type":"string","maxLength":255,"minLength":1,"title":"Title"},"note":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Note"},"source":{"$ref":"#/components/schemas/RequestSource","default":"manual"},"source_url":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Source Url"},"artwork_url":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Artwork Url"}},"type":"object","required":["artist","title"],"title":"RequestCreate"},"RequestOut":{"properties":{"id":{"type":"integer","title":"Id"},"event_id":{"type":"integer","title":"Event Id"},"song_title":{"type":"string","title":"Song Title"},"artist":{"type":"string","title":"Artist"},"source":{"type":"string","title":"Source"},"source_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Url"},"artwork_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Artwork Url"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"},"status":{"type":"string","title":"Status"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"is_duplicate":{"type":"boolean","title":"Is Duplicate","default":false}},"type":"object","required":["id","event_id","song_title","artist","source","source_url","artwork_url","note","status","created_at","updated_at"],"title":"RequestOut"},"RequestSource":{"type":"string","enum":["manual","musicbrainz","spotify","share_link"],"title":"RequestSource"},"RequestStatus":{"type":"string","enum":["new","accepted","playing","played","rejected"],"title":"RequestStatus"},"RequestUpdate":{"properties":{"status":{"$ref":"#/components/schemas/RequestStatus"}},"type":"object","required":["status"],"title":"RequestUpdate"},"SearchResult":{"properties":{"artist":{"type":"string","title":"Artist"},"title":{"type":"string","title":"Title"},"album":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Album"},"popularity":{"type":"integer","title":"Popularity","default":0},"spotify_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Spotify Id"},"album_art":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Album Art"},"preview_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Url"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"}},"type":"object","required":["artist","title"],"title":"SearchResult"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"Token"},"UserOut":{"properties":{"id":{"type":"integer","title":"Id"},"username":{"type":"string","title":"Username"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","username","is_active","created_at"],"title":"UserOut"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/auth/login"}}}}}}
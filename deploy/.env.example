# WrzDJ Production Environment Variables
# Copy to .env and fill in secure values

# =============================================================================
# Environment
# =============================================================================
ENV=production

# =============================================================================
# Database (Docker Compose internal)
# =============================================================================
POSTGRES_USER=wrzdj
POSTGRES_PASSWORD=your-secure-password-here
POSTGRES_DB=wrzdj

# =============================================================================
# Authentication
# =============================================================================
# IMPORTANT: Generate a secure secret with: openssl rand -hex 32
JWT_SECRET=change-me-use-openssl-rand-hex-32

# =============================================================================
# Spotify API (https://developer.spotify.com/dashboard)
# =============================================================================
SPOTIFY_CLIENT_ID=your-client-id
SPOTIFY_CLIENT_SECRET=your-client-secret

# =============================================================================
# Tidal API (https://developer.tidal.com/dashboard)
# =============================================================================
# TIDAL_CLIENT_ID=your-client-id
# TIDAL_CLIENT_SECRET=your-client-secret
# TIDAL_REDIRECT_URI=https://api.yourdomain.com/api/tidal/auth/callback

# =============================================================================
# StageLinQ Bridge
# =============================================================================
# Shared secret used by the bridge to authenticate with the backend.
# Generate with: openssl rand -hex 32
# BRIDGE_API_KEY=change-me-use-openssl-rand-hex-32

# =============================================================================
# Service Ports (host-side bindings)
# =============================================================================
# These control which ports nginx (or your reverse proxy) connects to.
# The containers always listen on their default internal ports.
PORT_API=8000
PORT_FRONTEND=3000

# =============================================================================
# Domain Configuration (Subdomain Model)
# =============================================================================
# Frontend: https://app.yourdomain.com
# Backend:  https://api.yourdomain.com
#
# Adjust these to your domain:

# CORS - which origins can access the API
CORS_ORIGINS=https://app.yourdomain.com

# Public URL - used for QR codes and shareable links (frontend URL)
PUBLIC_URL=https://app.yourdomain.com

# API URL - where the frontend connects to the backend
NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# =============================================================================
# Admin User (created on first startup)
# =============================================================================
# Creates admin user on first startup if no users exist.
# This user gets the admin role with full access to the admin dashboard.
BOOTSTRAP_ADMIN_USERNAME=admin
BOOTSTRAP_ADMIN_PASSWORD=your-secure-password

# =============================================================================
# Cloudflare Turnstile (CAPTCHA for self-registration)
# =============================================================================
# Get keys at: https://dash.cloudflare.com/?to=/:account/turnstile
# TURNSTILE_SITE_KEY=your-site-key
# TURNSTILE_SECRET_KEY=your-secret-key

# =============================================================================
# File Uploads
# =============================================================================
# Directory for uploaded files (banner images). Persisted via Docker volume.
# Default: /app/uploads (mapped to api_uploads Docker volume)
# UPLOADS_DIR=/app/uploads
# MAX_BANNER_SIZE_MB=5

# =============================================================================
# Rate Limiting & Security (optional overrides)
# =============================================================================
# These are auto-enabled in production. Override if needed:
#
# Trusted proxy IPs/CIDRs for X-Forwarded-For / X-Real-IP (comma-separated).
# Default covers loopback + all Docker bridge networks. Override if using
# an external load balancer or non-standard Docker networking.
# TRUSTED_PROXIES=127.0.0.1,::1,172.16.0.0/12
#
# RATE_LIMIT_ENABLED=true
# LOCKOUT_ENABLED=true
#
# Rate limits (requests per minute per IP):
# LOGIN_RATE_LIMIT_PER_MINUTE=5
# SEARCH_RATE_LIMIT_PER_MINUTE=30
# REQUEST_RATE_LIMIT_PER_MINUTE=10
